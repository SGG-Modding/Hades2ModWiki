"use strict";(self.webpackChunkhades_2_mod_wiki=self.webpackChunkhades_2_mod_wiki||[]).push([[95571],{9063:(e,n,o)=>{o.r(n),o.d(n,{assets:()=>r,contentTitle:()=>a,default:()=>h,frontMatter:()=>i,metadata:()=>s,toc:()=>c});const s=JSON.parse('{"id":"creating-mods/audio/adding-sounds-music","title":"Adding Sounds & Music","description":"Learn how to add new sounds or music to the game.","source":"@site/docs/creating-mods/audio/adding-sounds-music.md","sourceDirName":"creating-mods/audio","slug":"/creating-mods/audio/adding-sounds-music","permalink":"/Hades2ModWiki/docs/creating-mods/audio/adding-sounds-music","draft":false,"unlisted":false,"editUrl":"https://github.com/sgg-modding/hades2modwiki/tree/main/docs/creating-mods/audio/adding-sounds-music.md","tags":[],"version":"current","sidebarPosition":3,"frontMatter":{"sidebar_position":3},"sidebar":"tutorialSidebar","previous":{"title":"Adding Voicelines","permalink":"/Hades2ModWiki/docs/creating-mods/audio/adding-voicelines"},"next":{"title":"Hell2Modding Docs","permalink":"/Hades2ModWiki/docs/h2m-docs/"}}');var t=o(74848),d=o(28453);const i={sidebar_position:3},a="Adding Sounds & Music",r={},c=[{value:"Basics",id:"basics",level:2},{value:"Creating soundbanks",id:"creating-soundbanks",level:2},{value:"Load and play sounds in the game",id:"load-and-play-sounds-in-the-game",level:2}];function l(e){const n={a:"a",admonition:"admonition",blockquote:"blockquote",code:"code",h1:"h1",h2:"h2",header:"header",p:"p",pre:"pre",strong:"strong",...(0,d.R)(),...e.components};return(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(n.header,{children:(0,t.jsx)(n.h1,{id:"adding-sounds--music",children:"Adding Sounds & Music"})}),"\n",(0,t.jsx)(n.p,{children:"Learn how to add new sounds or music to the game."}),"\n",(0,t.jsx)(n.admonition,{title:"Install the required tools",type:"info",children:(0,t.jsxs)(n.p,{children:["Make sure you have followed the ",(0,t.jsx)(n.a,{href:"/Hades2ModWiki/docs/creating-mods/audio/prerequisites",children:"prerequisites"})," page to install the necessary tools before proceeding."]})}),"\n",(0,t.jsxs)(n.p,{children:["You should additionally use the following FMOD Studio project as a template for your project, as it references the game's master bank GUID correctly (thanks to ",(0,t.jsx)(n.a,{href:"https://github.com/xiaoxiao921",children:"iDeathHD"})," for creating the template):"]}),"\n",(0,t.jsx)(n.p,{children:(0,t.jsx)(n.a,{target:"_blank","data-noBrokenLinkCheck":!0,href:o(14077).A+"",children:"Download the TestHades2FModProject.zip"})}),"\n",(0,t.jsxs)(n.p,{children:["Some additional information regarding this template from the relevant ",(0,t.jsx)(n.a,{href:"https://github.com/SGG-Modding/Hell2Modding/blob/master/docs/lua/tables/rom.audio.md",children:"Hell2Modding documentation"}),":"]}),"\n",(0,t.jsxs)(n.blockquote,{children:["\n",(0,t.jsxs)(n.p,{children:["The game currently uses FMOD Studio ",(0,t.jsx)(n.code,{children:"2.02.23"}),".\r\nYou can query the version by clicking checking ",(0,t.jsx)(n.code,{children:"Properties"})," -> ",(0,t.jsx)(n.code,{children:"Details"})," of the game's ",(0,t.jsx)(n.code,{children:"fmodstudio.dll"}),".\r\nIf your sound events correcty play (no ",(0,t.jsx)(n.code,{children:"Failed to play event"})," warning in the console) but nothing can be heard, make sure that the guid of the Mixer masterBus, MixerInput output and MixerMaster id match the one from the game.\r\nOne known to work is the guid that can be found inside the vanilla game file ",(0,t.jsx)(n.code,{children:"GUIDS.txt"}),", called ",(0,t.jsx)(n.code,{children:"bus:/Game"}),".\r\nYou'll want to string replace the guids in the (at minimum 2) ",(0,t.jsx)(n.code,{children:".xml"})," files Master, Mixer, and any Metadata/Event events files that were made before the guid setup change."]}),"\n"]}),"\n",(0,t.jsx)(n.admonition,{title:"Reference mod",type:"info",children:(0,t.jsxs)(n.p,{children:["You can refer to the ",(0,t.jsx)(n.a,{href:"https://github.com/NikkelM/Hades-II-UnlockHadesMusic",children:"Hades OST for the Music Maker"})," mod as an example of how to add music to the game using this method."]})}),"\n",(0,t.jsx)(n.h2,{id:"basics",children:"Basics"}),"\n",(0,t.jsxs)(n.p,{children:["In Hades II, sounds and music are stored in ",(0,t.jsx)(n.code,{children:".bank"})," files, which are then loaded into the game's audio system."]}),"\n",(0,t.jsxs)(n.p,{children:["These ",(0,t.jsx)(n.code,{children:".bank"})," files are stored in the ",(0,t.jsx)(n.code,{children:"Content/Audio/Desktop"})," folder in your Hades II installation."]}),"\n",(0,t.jsx)(n.h2,{id:"creating-soundbanks",children:"Creating soundbanks"}),"\n",(0,t.jsx)(n.p,{children:"Use the template FMOD studio project linked above and add your assets to the project."}),"\n",(0,t.jsx)(n.admonition,{title:"Looping",type:"info",children:(0,t.jsxs)(n.p,{children:["If you are adding music or sounds that should loop, select the event in FMOD Studio, right-click the timeline/preview of the event and select ",(0,t.jsx)(n.code,{children:"New Loop Region"}),".\r\nThis will add a new logic track on top of the event that you can use to define the looping region.\r\nWhen previewing the event, the event should loop seamlessly."]})}),"\n",(0,t.jsxs)(n.p,{children:["Now, add your events to a new bank, this should be a unique name not used by any other bank in the game, or by another mod.\r\nIt is recommended to use the same name format as for mods, i.e. ",(0,t.jsx)(n.code,{children:"AuthorNameModName"}),", such as ",(0,t.jsx)(n.code,{children:"ModsNikkelMUnlockHadesMusic"})," to prevent clashes."]}),"\n",(0,t.jsxs)(n.p,{children:["Next, build your bank by using ",(0,t.jsx)(n.code,{children:"File"})," -> ",(0,t.jsx)(n.code,{children:"Build"})," in FMOD Studio.\r\nAdd the resulting ",(0,t.jsx)(n.code,{children:".bank"})," file to your mod's ",(0,t.jsx)(n.code,{children:"data"})," folder (which should be added to ",(0,t.jsx)(n.code,{children:"plugins_data"})," when your mod is installed through Thunderstore)."]}),"\n",(0,t.jsxs)(n.p,{children:["You will need the events' GUIDs to play them in the game, so you should also export the ",(0,t.jsx)(n.code,{children:"GUID.txt"})," file from FMOD Studio, through ",(0,t.jsx)(n.code,{children:"File"})," -> ",(0,t.jsx)(n.code,{children:"Export GUIDs..."}),".\r\nYou do not have to include this file in your mod, but you should have it ready as a reference.\r\nThe file will look like this:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-plaintext",children:"{f0979c2d-d4d0-418e-b172-86c36619ccc3} bank:/ModsNikkelMUnlockHadesMusic\r\n{57fbe830-4207-4601-8ca1-cd69eebfa742} event:/Mods/NikkelMUnlockHadesMusic/DeathAndI\r\n{b0533fd9-9980-4fc6-b0a7-23813f2cda1c} event:/Mods/NikkelMUnlockHadesMusic/FieldOfSouls\r\n{1d2d987b-853b-4a65-aa2d-a3e8c7e0e99b} event:/Mods/NikkelMUnlockHadesMusic/FinalExpense\r\n...\n"})}),"\n",(0,t.jsx)(n.p,{children:"You will need the GUIDs for the events (the bank GUID is irrelevant) later on when you want to play the events in the game.\r\nIt is recommended to create some sort of mapping of GUIDs to event names within your mod, to make your mod more maintainable and readable by others."}),"\n",(0,t.jsx)(n.h2,{id:"load-and-play-sounds-in-the-game",children:"Load and play sounds in the game"}),"\n",(0,t.jsxs)(n.p,{children:["In your mod, you must load the soundbank before you can play any events from it, using ",(0,t.jsx)(n.code,{children:"rom.audio.load_bank(path)"}),", e.g.:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'-- Loads the sound bank when entering the Crossroads or switching between rooms in the Crossroads\r\nmodutil.mod.Path.Wrap("DeathAreaRoomTransition", function(base, source, args)\r\n\trom.audio.load_bank(rom.path.combine(_PLUGIN.plugins_data_mod_folder_path, "Audio\\\\ModsNikkelMUnlockHadesMusic.bank"))\r\n\tbase(source, args)\r\nend)\n'})}),"\n",(0,t.jsxs)(n.p,{children:[(0,t.jsx)(n.code,{children:"_PLUGIN.plugins_data_mod_folder_path"})," automatically resolves to your mod's ",(0,t.jsx)(n.code,{children:"plugins_data"})," folder, which should contain your ",(0,t.jsx)(n.code,{children:".bank"})," file."]}),"\n",(0,t.jsxs)(n.p,{children:["After loading your bank, you can play events using their GUIDs in the following format ",(0,t.jsx)(n.code,{children:"{GUID}"}),", e.g.:"]}),"\n",(0,t.jsx)(n.pre,{children:(0,t.jsx)(n.code,{className:"language-lua",children:'local trackName = "{57fbe830-4207-4601-8ca1-cd69eebfa742}"\r\n\r\nPlaySound({ Name = trackName })\n'})}),"\n",(0,t.jsxs)(n.p,{children:["You can get the GUID for an event from the exported ",(0,t.jsx)(n.code,{children:"GUIDs.txt"})," file."]}),"\n",(0,t.jsx)(n.admonition,{title:"Curly braces",type:"warning",children:(0,t.jsxs)(n.p,{children:["Make sure to include the curly braces ",(0,t.jsx)(n.code,{children:"{}"})," around the GUID, as this is how the game recognizes the GUID as a GUID instead of a name."]})}),"\n",(0,t.jsx)(n.admonition,{title:"Event names are not supported",type:"warning",children:(0,t.jsxs)(n.p,{children:["It is important to note that you ",(0,t.jsx)(n.strong,{children:"cannot"})," play events by their name for custom soundbanks, only by their GUID.\r\nThis is a restriction imposed by the way FMOD's master bank works."]})})]})}function h(e={}){const{wrapper:n}={...(0,d.R)(),...e.components};return n?(0,t.jsx)(n,{...e,children:(0,t.jsx)(l,{...e})}):l(e)}},14077:(e,n,o)=>{o.d(n,{A:()=>s});const s=o.p+"assets/files/TestHades2FModProject-77a2dc770c529a8a94b7420cd03f1ebd.zip"},28453:(e,n,o)=>{o.d(n,{R:()=>i,x:()=>a});var s=o(96540);const t={},d=s.createContext(t);function i(e){const n=s.useContext(d);return s.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function a(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(t):e.components||t:i(e.components),s.createElement(d.Provider,{value:n},e.children)}}}]);