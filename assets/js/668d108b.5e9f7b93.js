"use strict";(self.webpackChunkhades_2_mod_wiki=self.webpackChunkhades_2_mod_wiki||[]).push([[10842],{90457:(e,t,n)=>{n.r(t),n.d(t,{assets:()=>d,contentTitle:()=>r,default:()=>h,frontMatter:()=>a,metadata:()=>i,toc:()=>c});const i=JSON.parse('{"id":"creating-mods/audio/adding-multitrack-music","title":"Adding Multi-Track Music","description":"Learn how to add new music with dynamic tracks to the game.","source":"@site/docs/creating-mods/audio/adding-multitrack-music.md","sourceDirName":"creating-mods/audio","slug":"/creating-mods/audio/adding-multitrack-music","permalink":"/Hades2ModWiki/docs/creating-mods/audio/adding-multitrack-music","draft":false,"unlisted":false,"editUrl":"https://github.com/sgg-modding/hades2modwiki/tree/main/docs/creating-mods/audio/adding-multitrack-music.md","tags":[],"version":"current","sidebarPosition":4,"frontMatter":{"sidebar_position":4},"sidebar":"tutorialSidebar","previous":{"title":"Adding Sounds & Music","permalink":"/Hades2ModWiki/docs/creating-mods/audio/adding-sounds-music"},"next":{"title":"Hell2Modding Docs","permalink":"/Hades2ModWiki/docs/h2m-docs/"}}');var o=n(74848),s=n(28453);const a={sidebar_position:4},r="Adding Multi-Track Music",d={},c=[{value:"Multi-track music in Hades II",id:"multi-track-music-in-hades-ii",level:2},{value:"Creating your own multi-track music event",id:"creating-your-own-multi-track-music-event",level:2},{value:"Setting up a new automation parameter",id:"setting-up-a-new-automation-parameter",level:3},{value:"Turning tracks on and off in the code",id:"turning-tracks-on-and-off-in-the-code",level:2},{value:"Example",id:"example",level:2}];function l(e){const t={a:"a",admonition:"admonition",code:"code",em:"em",h1:"h1",h2:"h2",h3:"h3",header:"header",hr:"hr",img:"img",li:"li",mdxAdmonitionTitle:"mdxAdmonitionTitle",ol:"ol",p:"p",pre:"pre",ul:"ul",...(0,s.R)(),...e.components};return(0,o.jsxs)(o.Fragment,{children:[(0,o.jsx)(t.header,{children:(0,o.jsx)(t.h1,{id:"adding-multi-track-music",children:"Adding Multi-Track Music"})}),"\n",(0,o.jsx)(t.p,{children:"Learn how to add new music with dynamic tracks to the game."}),"\n",(0,o.jsx)(t.hr,{}),"\n",(0,o.jsxs)(t.p,{children:["This guide will teach you how to add new music with multiple, dynamic tracks (such as vocals, different instruments) to Hades II.\r\nIn the game, a track is called a ",(0,o.jsx)(t.code,{children:"stem"})," (or ",(0,o.jsx)(t.code,{children:"MusicStem"}),")."]}),"\n",(0,o.jsxs)(t.admonition,{type:"info",children:[(0,o.jsxs)(t.mdxAdmonitionTitle,{children:[(0,o.jsx)(t.code,{children:"MusicStem"})," vs ",(0,o.jsx)(t.code,{children:"MusicSection"})]}),(0,o.jsxs)(t.p,{children:["Note that the ",(0,o.jsx)(t.code,{children:"MusicStem"})," system is different from the ",(0,o.jsx)(t.code,{children:"MusicSection"})," system, which is used to change the style or intensity of the current track.\r\nAn example where the section would be changed is when the biome background music changes when entering a (mini-)boss room, or outside of combat.\r\nAt the time of writing, how to properly utilize this system for custom tracks has not been explored yet."]})]}),"\n",(0,o.jsx)(t.admonition,{title:"Follow the general music guide first",type:"info",children:(0,o.jsxs)(t.p,{children:["Before continuing to read this guide, make sure you have read and understood the ",(0,o.jsx)(t.a,{href:"/Hades2ModWiki/docs/creating-mods/audio/adding-sounds-music",children:"Adding Sounds & Music"})," guide, as this guide builds on that knowledge."]})}),"\n",(0,o.jsx)(t.h2,{id:"multi-track-music-in-hades-ii",children:"Multi-track music in Hades II"}),"\n",(0,o.jsx)(t.p,{children:"In Hades II, most music events are multi-track, meaning that they consist of multiple instrumental and vocal tracks that are toggled on and off on-demand by the game."}),"\n",(0,o.jsxs)(t.p,{children:["The most recognizable examples for this is the vocal and instrumental tracks in the Oceanus boss fight with Scylla and her band, which turns off the vocals/guitar/drum tracks when the corresponding siren has been defeated.\r\nThe logic for this can be found in ",(0,o.jsx)(t.code,{children:"Scripts/PresentationBiomeG.lua"}),", in the ",(0,o.jsx)(t.code,{children:"SirenKillPresentation()"})," function.\r\nThis turns off the ",(0,o.jsx)(t.code,{children:"MusicStem"})," of the siren that was killed by setting the ",(0,o.jsx)(t.code,{children:"SoundCueValue"})," of the corresponding stem to 0."]}),"\n",(0,o.jsxs)(t.p,{children:["Another example of this system in use is the background music during a biome, these each consist of multiple instrumental tracks, only a certain number of which are randomly turned on within a room, to add more variety to a given music track.\r\nThe logic for this can be found in ",(0,o.jsx)(t.code,{children:"Scripts/AudioPresentation.lua"}),", in the ",(0,o.jsx)(t.code,{children:"RandomStemMixer()"})," function.\r\nThis function randomly selects a ",(0,o.jsx)(t.code,{children:"musicSetup"}),", each value of which corresponds to a different combination of instruments to be played in this room."]}),"\n",(0,o.jsx)(t.h2,{id:"creating-your-own-multi-track-music-event",children:"Creating your own multi-track music event"}),"\n",(0,o.jsxs)(t.p,{children:["Follow the ",(0,o.jsx)(t.a,{href:"/Hades2ModWiki/docs/creating-mods/audio/adding-sounds-music",children:"Adding Sounds & Music"})," guide to create a new music event for the base track/first instrument of your music first."]}),"\n",(0,o.jsxs)(t.p,{children:["The following sections will reference and explain the below screenshot, so refer back to it as needed:\r\n",(0,o.jsx)(t.img,{alt:"FMOD Studio multi-track music event example",src:n(76673).A+"",width:"3071",height:"1831"})]}),"\n",(0,o.jsxs)(t.p,{children:["To add additional stems to your music event, create a new track in FMOD Studio for each stem (e.g., vocals, guitar, drums).\r\nTo do so, right-click on the existing track and choose ",(0,o.jsx)(t.code,{children:"Add Audio Track"}),".\r\nThe names of the tracks do not matter.\r\nOnto these new tracks, import your asset files, these should ",(0,o.jsx)(t.em,{children:"not"})," be their own events.\r\nYou may freely move the assets on the tracks, e.g. to have one start with a delay."]}),"\n",(0,o.jsxs)(t.p,{children:["In the example, two audio tracks ",(0,o.jsx)(t.code,{children:"Audio 1"})," and ",(0,o.jsx)(t.code,{children:"Audio 3"})," were added.\r\nThe first track contains the music played by Eurydice in her Asphodel chamber, while the second track contains her vocals.\r\nThe event is called ",(0,o.jsx)(t.code,{children:"EurydiceSong_Baglama3"}),", which was the asset name of the music track, this can be changed to anything you like.\r\nThe vocal track exists on the ",(0,o.jsx)(t.code,{children:"Assets"})," tab (not visible), but ",(0,o.jsx)(t.em,{children:"not"})," as a separate event."]}),"\n",(0,o.jsx)(t.p,{children:"For each track/stem that you want to dynamically control via code, you'll need to set up an automation to control when it should play:"}),"\n",(0,o.jsxs)(t.ol,{children:["\n",(0,o.jsxs)(t.li,{children:["Right-click the volume knob of the stem track (under the ",(0,o.jsx)(t.code,{children:"Solo"})," and ",(0,o.jsx)(t.code,{children:"Mute"})," buttons) and select ",(0,o.jsx)(t.code,{children:"Add Automation"}),"."]}),"\n",(0,o.jsx)(t.li,{children:"Click into the newly created automation track to open the automation panel at the bottom."}),"\n",(0,o.jsxs)(t.li,{children:["Select ",(0,o.jsx)(t.code,{children:"Add Curve"})," and create or select a parameter for this stem.","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["If you do not see this option, you may need to expand the ",(0,o.jsx)(t.code,{children:"Automation & Modulation"})," section to the right of the Fader."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["If this is your first time using the given stem, select ",(0,o.jsx)(t.code,{children:"Browse"})," -> ",(0,o.jsx)(t.code,{children:"New Parameter"})," and follow ",(0,o.jsx)(t.a,{href:"#setting-up-a-new-automation-parameter",children:"Setting up a new automation parameter"})," below, otherwise select an already existing parameter for this stem."]}),"\n",(0,o.jsxs)(t.li,{children:["Click on two different points on the red curve to create new reference points.","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Drag the left point to the very left bottom corner, so that the volume is at ",(0,o.jsx)(t.code,{children:"-infinity"})," decibels when the parameter is at ",(0,o.jsx)(t.code,{children:"0"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:["Drag the right point to the top right, so that the volume is at ",(0,o.jsx)(t.code,{children:"0"})," decibels when the parameter is at ",(0,o.jsx)(t.code,{children:"1"}),".","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["If you want to boost the audio at a value of ",(0,o.jsx)(t.code,{children:"1"}),", you can change the curve to be above the ",(0,o.jsx)(t.code,{children:"0"})," decibel line, but this is not recommended."]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:["To allow you to fade in the stem with floating point values between 0 and 1 via code, you can create additional points and fine-tune theri positions using right-click -> ",(0,o.jsx)(t.code,{children:"Edit..."})," on the points. An initial third point at ",(0,o.jsx)(t.code,{children:"0.05"})," with at least ",(0,o.jsx)(t.code,{children:"-10"})," decibels is recommended, as anything below makes the audio barely audible.","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["You don't have to add any additional points if you will only ever set the stem to ",(0,o.jsx)(t.code,{children:"0"})," or ",(0,o.jsx)(t.code,{children:"1"}),", but if you do not set any, the volume drop-off will be very sudden."]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.p,{children:["That's it - follow the generic guide to learn how to export and play your new multi-track music events in the game.\r\nFollow the ",(0,o.jsx)(t.a,{href:"#turning-tracks-on-and-off-in-the-code",children:"Turning tracks on and off in the code"})," section below to learn how to control the stems from within your mod."]}),"\n",(0,o.jsx)(t.h3,{id:"setting-up-a-new-automation-parameter",children:"Setting up a new automation parameter"}),"\n",(0,o.jsx)(t.p,{children:"For most use cases, configure your new parameter as follows:"}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:["Parameter Type: ",(0,o.jsx)(t.code,{children:"User: Continuous"})]}),"\n",(0,o.jsx)(t.li,{children:"Parameter Name: The name of the stem in the game (see below for a list of all known stems), or a custom name of your choice."}),"\n",(0,o.jsx)(t.li,{children:"Range: 0 to 1"}),"\n",(0,o.jsx)(t.li,{children:"Initial Value: 1"}),"\n",(0,o.jsx)(t.li,{children:"Parameter Scope: Local"}),"\n",(0,o.jsxs)(t.li,{children:["Additional Options: Leave the defaults of only ",(0,o.jsx)(t.code,{children:"Exposed recursively via event instruments"})," checked."]}),"\n"]}),"\n",(0,o.jsx)(t.admonition,{title:"Custom parameter names",type:"tip",children:(0,o.jsx)(t.p,{children:"You can also create custom parameter names for your mod-specific stems. Just make sure to use those same names when controlling them via code."})}),"\n",(0,o.jsxs)(t.p,{children:["Known stem names in the game are: ",(0,o.jsx)(t.code,{children:"Vocals"}),", ",(0,o.jsx)(t.code,{children:"Vocals2"}),", ",(0,o.jsx)(t.code,{children:"Guitar"}),", ",(0,o.jsx)(t.code,{children:"Drums"}),", ",(0,o.jsx)(t.code,{children:"Bass"}),", ",(0,o.jsx)(t.code,{children:"ChaosBass"}),", ",(0,o.jsx)(t.code,{children:"Keys"}),", and ",(0,o.jsx)(t.code,{children:"Sax"}),'.\r\nYou can re-use these if you want to integrate your new event "natively" into existing game logic.']}),"\n",(0,o.jsx)(t.h2,{id:"turning-tracks-on-and-off-in-the-code",children:"Turning tracks on and off in the code"}),"\n",(0,o.jsx)(t.p,{children:"A track can be turned on or off by using"}),"\n",(0,o.jsx)(t.pre,{children:(0,o.jsx)(t.code,{className:"language-lua",children:"SetSoundCueValue({ Names = trackNames, Id = musicId, Value = volume, Duration = fadeInOutDuration })\n"})}),"\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"trackNames"})," is a table of the tracks for which to modify the volume, e.g. ",(0,o.jsx)(t.code,{children:'{ "Guitar" }'}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"musicId"})," is the ID of which music event should be modified, e.g. ",(0,o.jsx)(t.code,{children:"AudioState.SecretMusicId"})," or ",(0,o.jsx)(t.code,{children:"AudioState.MusicId"}),"."]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"volume"})," is a float between 0 and 1, with 0 meaning the track is effectively turned off, and 1 meaning it is at the default volume.","\n",(0,o.jsxs)(t.ul,{children:["\n",(0,o.jsx)(t.li,{children:"Most times, no values other than 0 and 1 are used. In the Scylla boss fight, non-featured-artist tracks are set to a value of 0.65 during the second phase."}),"\n"]}),"\n"]}),"\n",(0,o.jsxs)(t.li,{children:[(0,o.jsx)(t.code,{children:"fadeInOutDuration"})," is the duration in seconds over which the current volume is changed to the new volume. To immediately start or stop the track, set this to 0."]}),"\n"]}),"\n",(0,o.jsx)(t.h2,{id:"example",children:"Example"}),"\n",(0,o.jsxs)(t.p,{children:["The following is an in-game example of turning the ",(0,o.jsx)(t.code,{children:"Vocals"})," track off when the player interacts with Eurydice, and turning it back on when the player leaves her boon menu:"]}),"\n",(0,o.jsx)("div",{style:{position:"relative",paddingBottom:"56.25%",height:0,overflow:"hidden"},children:(0,o.jsx)("iframe",{style:{position:"absolute",top:0,left:0,width:"100%",height:"100%"},src:"https://www.youtube.com/embed/7vhA-zyHGkc",title:"Hades II Modding Guide - Multi-Track Music demo",frameBorder:"0",allowFullScreen:!0})})]})}function h(e={}){const{wrapper:t}={...(0,s.R)(),...e.components};return t?(0,o.jsx)(t,{...e,children:(0,o.jsx)(l,{...e})}):l(e)}},76673:(e,t,n)=>{n.d(t,{A:()=>i});const i=n.p+"assets/images/fmod_multi_track-a3766614cc11c3bd04e1da9360520f75.png"},28453:(e,t,n)=>{n.d(t,{R:()=>a,x:()=>r});var i=n(96540);const o={},s=i.createContext(o);function a(e){const t=i.useContext(s);return i.useMemo((function(){return"function"==typeof e?e(t):{...t,...e}}),[t,e])}function r(e){let t;return t=e.disableParentContext?"function"==typeof e.components?e.components(o):e.components||o:a(e.components),i.createElement(s.Provider,{value:t},e.children)}}}]);