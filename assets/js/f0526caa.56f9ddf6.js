"use strict";(self.webpackChunkhades_2_mod_wiki=self.webpackChunkhades_2_mod_wiki||[]).push([[61191],{94252:(e,n,t)=>{t.r(n),t.d(n,{assets:()=>s,contentTitle:()=>o,default:()=>m,frontMatter:()=>a,metadata:()=>r,toc:()=>d});const r=JSON.parse('{"id":"h2m-docs/tables/toml","title":"toml","description":"Usage","source":"@site/docs/h2m-docs/tables/toml.md","sourceDirName":"h2m-docs/tables","slug":"/h2m-docs/tables/toml","permalink":"/Hades2ModWiki/docs/h2m-docs/tables/toml","draft":false,"unlisted":false,"editUrl":"https://github.com/sgg-modding/hades2modwiki/tree/main/docs/h2m-docs/tables/toml.md","tags":[],"version":"current","frontMatter":{},"sidebar":"tutorialSidebar","previous":{"title":"Table: rom.tolk","permalink":"/Hades2ModWiki/docs/h2m-docs/tables/rom.tolk"},"next":{"title":"In-Game Definitions","permalink":"/Hades2ModWiki/docs/category/in-game-definitions"}}');var l=t(74848),i=t(28453);const a={},o=void 0,s={},d=[{value:"Usage",id:"usage",level:2},{value:"Decoding",id:"decoding",level:3},{value:"Decoding Options",id:"decoding-options",level:4},{value:"<code>temporalTypesAsUserData</code>",id:"temporaltypesasuserdata",level:5},{value:"<code>formattedIntsAsUserData</code>",id:"formattedintsasuserdata",level:5},{value:"Encoding",id:"encoding",level:3},{value:"Error Handling",id:"error-handling",level:3},{value:"Inline Tables",id:"inline-tables",level:3},{value:"TOML Conversion",id:"toml-conversion",level:3},{value:"JSON",id:"json",level:4},{value:"YAML",id:"yaml",level:4},{value:"Output Formatting",id:"output-formatting",level:3},{value:"Formatting Integers",id:"formatting-integers",level:4},{value:"Formatting TOML, JSON, or YAML",id:"formatting-toml-json-or-yaml",level:4},{value:"Date and Time",id:"date-and-time",level:3}];function c(e){const n={a:"a",blockquote:"blockquote",code:"code",h2:"h2",h3:"h3",h4:"h4",h5:"h5",li:"li",p:"p",pre:"pre",ul:"ul",...(0,i.R)(),...e.components};return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(n.h2,{id:"usage",children:"Usage"}),"\n",(0,l.jsx)(n.h3,{id:"decoding",children:"Decoding"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local tomlStr = [[\r\na = 1275892\r\nb = 'Hello, World!'\r\nc = true\r\nd = 124.2548\r\n\r\n[e]\r\nf = [ 1, 2, 3, '4', 5.142 ]\r\ng = 1979-05-27\r\nh = 07:32:00\r\ni = 1979-05-27T07:32:00-07:00\r\n]]\r\n\r\n-- Decode from string\r\nlocal succeeded, table = pcall(toml.decode, tomlStr)\r\n\r\n-- Decode from file\r\nsucceeded, table = pcall(toml.decodeFromFile, \"configuration.toml\")\r\n\r\nif succeeded then\r\n-- Use `table`.\r\nelse\r\n-- Error details are in `table`.\r\nend\n"})}),"\n",(0,l.jsx)(n.h4,{id:"decoding-options",children:"Decoding Options"}),"\n",(0,l.jsx)(n.h5,{id:"temporaltypesasuserdata",children:(0,l.jsx)(n.code,{children:"temporalTypesAsUserData"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"temporalTypesAsUserData = true"}),": The userdata types ",(0,l.jsx)(n.code,{children:"toml.Date"}),", ",(0,l.jsx)(n.code,{children:"toml.Time"}),", and ",(0,l.jsx)(n.code,{children:"toml.DateTime"})," are used to represent TOML date and time types."]}),"\n"]}),"\n",(0,l.jsxs)(n.li,{children:["\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"temporalTypesAsUserData = false"}),": Lua tables are used to represent TOML date and time types."]}),"\n"]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["The default value is ",(0,l.jsx)(n.code,{children:"true"})]}),"\n"]}),"\n",(0,l.jsx)(n.h5,{id:"formattedintsasuserdata",children:(0,l.jsx)(n.code,{children:"formattedIntsAsUserData"})}),"\n",(0,l.jsxs)(n.ul,{children:["\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"formattedIntsAsUserData = true"}),": The userdata type ",(0,l.jsx)(n.code,{children:"toml.Int"})," is used to represent integers in octal, binary, or hexadecimal format."]}),"\n",(0,l.jsxs)(n.li,{children:[(0,l.jsx)(n.code,{children:"formattedIntsAsUserData = false"}),": Integers in octal, binary, or hexadecimal format will be represented in decimal."]}),"\n"]}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["The default value is ",(0,l.jsx)(n.code,{children:"false"})]}),"\n"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local tomlStr = [[\r\ndate = 1979-05-27\r\ntime = 07:32:00\r\ndatetime = 1979-05-27T07:32:00-07:00\r\n\r\nhexadecimal = 0x16C3\r\nbinary = 0b110110011011\r\noctal = 0x169F\r\n]]\r\n\r\nlocal table1 = toml.decode(tomlStr, { temporalTypesAsUserData = true, formattedIntsAsUserData = true })\r\nlocal table2 = toml.decode(tomlStr, { temporalTypesAsUserData = false, formattedIntsAsUserData = false })\n"})}),"\n",(0,l.jsx)(n.h3,{id:"encoding",children:"Encoding"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:'-- Inline tables: https://toml.io/en/v1.0.0#inline-table\r\nlocal inlineTable = {\r\n\ta = 1275892,\r\n\tb = "Hello, World!",\r\n\tc = true,\r\n\td = 124.2548,\r\n}\r\n\r\n-- Make the table inline.\r\nsetmetatable(inlineTable, { inline = true })\r\n\r\nlocal table = {\r\n\r\n\te = {\r\n\t\tf = { 1, 2, 3, "4", 5.142 },\r\n\t\tg = toml.Date.new(1979,   05,     27),\r\n\t\t--                year   month   day\r\n\r\n\t\th = toml.Time.new( 7,     32,      0,        0),\r\n\t\t--                hour   minute  second   nanoSecond\r\n\r\n\t\ti = toml.DateTime.new(\r\n\t\t\ttoml.Date.new(1979, 05, 27),\r\n\t\t\ttoml.Time.new(7, 32, 0, 0),\r\n\r\n\t\t\ttoml.TimeOffset.new(  -7,     0)\r\n\t\t\t--                   hour   minute\r\n\t\t)\r\n\t},\r\n\tinlineTable = inlineTable\r\n}\r\n\r\n-- Encode to string\r\nlocal succeeded, documentOrErrorMessage = pcall(toml.encode, table)\r\n\r\n-- Encode to file, this will **append** to the file.\r\nsucceeded, documentOrErrorMessage = pcall(toml.encodeToFile, table, "configuration.toml")\r\n\r\n-- Encode to file, this will **overwrite** the file.\r\nsucceeded, documentOrErrorMessage = pcall(toml.encodeToFile, table, { file = "configuration.toml", overwrite = true })\r\n\r\nif succeeded then\r\n\t-- Successfully encoded to string / wrote to file\r\n\tprint(tomlDocumentOrErrorMessage)\r\nelse\r\n-- Error occurred\r\n\tprint(tomlDocumentOrErrorMessage)\r\nend\r\n\r\n--[[\r\ninlineTable = { a = 1275892, b = "Hello, World!", c = true, d = 124.2548 }\r\n\r\n[e]\r\nf = [ 1, 2, 3, "4", 5.1420000000000003 ]\r\ng = 1979-05-27\r\nh = 07:32:00\r\ni = 1979-05-27T07:32:00-07:00\r\n--]]\n'})}),"\n",(0,l.jsx)(n.h3,{id:"error-handling",children:"Error Handling"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local tomlStr = [[\r\na = 1275892\r\nb = 'Hello, World!'\r\nc = true\r\nd = 124. # <-- ERROR: \"Expected decimal digit\"\r\n\r\n[e]\r\nf = [ 1, 2, 3, '4', 5.142 ]\r\ng = 1979-05-27\r\nh = 07:32:00\r\ni = 1979-05-27T07:32:00-07:00\r\n]]\r\n\r\nlocal succeeded, table = pcall(toml.decode, tomlStr)\r\n\r\nif succeeded then\r\n\t-- Use decoded table.\r\nelse\r\n\t-- Error details are in `table`.\r\nend\n"})}),"\n",(0,l.jsx)(n.h3,{id:"inline-tables",children:"Inline Tables"}),"\n",(0,l.jsxs)(n.p,{children:["Use ",(0,l.jsx)(n.code,{children:"setmetatable(myTable, { inline = true })"})," to create an ",(0,l.jsx)(n.a,{href:"https://toml.io/en/v1.0.0#inline-table",children:"inline table"}),"."]}),"\n",(0,l.jsx)(n.h3,{id:"toml-conversion",children:"TOML Conversion"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local tomlStr = [[\r\na = 1275892\r\nb = 'Hello, World!'\r\nc = true\r\nd = 124.2548\r\n\r\n[e]\r\nf = [ 1, 2, 3, '4', 5.142 ]\r\ng = 1979-05-27\r\nh = 07:32:00\r\ni = 1979-05-27T07:32:00-07:00\r\n]]\n"})}),"\n",(0,l.jsx)(n.h4,{id:"json",children:"JSON"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"-- Convert from a string\r\nlocal json = toml.toJSON(tomlStr)\r\n\r\n-- or from a table\r\njson = toml.toJSON(toml.decode(tomlStr))\r\n\r\nprint(json)\n"})}),"\n",(0,l.jsx)(n.h4,{id:"yaml",children:"YAML"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local yaml = toml.toYAML(tomlStr)\r\nyaml = toml.toYAML(toml.decode(tomlStr))\r\nprint(yaml)\n"})}),"\n",(0,l.jsx)(n.h3,{id:"output-formatting",children:"Output Formatting"}),"\n",(0,l.jsx)(n.h4,{id:"formatting-integers",children:"Formatting Integers"}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"local normalIntegers = {\r\n\tint1 = 2582\r\n\tint2 = 3483\r\n\tint3 = 5971\r\n}\r\nprint(toml.encode(normalIntegers))\r\n--[[\r\nint1 = 2582\r\nint2 = 3483\r\nint3 = 5791\r\n--]]\r\n\r\nlocal formattedIntegers = {\r\n\tint1 = toml.Int.new(2582, toml.formatting.int.octal),\r\n\tint2 = toml.Int.new(3483, toml.formatting.int.binary),\r\n\tint3 = toml.Int.new(5791, toml.formatting.int.hexadecimal)\r\n}\r\n\r\nprint(toml.encode(formattedIntegers))\r\n--[[\r\nint1 = 0o5026\r\nint2 = 0b110110011011\r\nint3 = 0x169F\r\n--]]\r\n\r\n-- Use `int` and `flags` properties to assign and retrieve flags and integers.\r\nlocal int = formattedIntegers.int1.int\r\nlocal flags = formattedIntegers.int1.flags\r\n\r\nformattedIntegers.int1.int = 5827\r\nformattedIntegers.int1.flags = toml.formatting.int.hexadecimal\r\n\r\nprint(toml.encode(formattedIntegers))\r\n--[[\r\nint1 = 0x16C3\r\nint2 = 0b110110011011\r\nint3 = 0x169F\r\n--]]\n"})}),"\n",(0,l.jsx)(n.h4,{id:"formatting-toml-json-or-yaml",children:"Formatting TOML, JSON, or YAML"}),"\n",(0,l.jsxs)(n.p,{children:[(0,l.jsx)(n.code,{children:"toml.encode"}),", ",(0,l.jsx)(n.code,{children:"toml.encodeToFile"}),", ",(0,l.jsx)(n.code,{children:"toml.toJSON"}),", and ",(0,l.jsx)(n.code,{children:"toml.toYAML"})," all take an optional second parameter: a table containing keys that disable or enable different formatting options.\r\nPassing an empty table removes all options, while not providing a table will use the default options."]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"{\r\n\t--- Dates and times will be emitted as quoted strings.\r\n\tquoteDatesAndTimes = false,\r\n\r\n\t--- Infinities and NaNs will be emitted as quoted strings.\r\n\tquoteInfinitesAndNaNs = false,\r\n\r\n\t--- Strings will be emitted as single-quoted literal strings where possible.\r\n\tallowLiteralStrings = false,\r\n\r\n\t--- Strings containing newlines will be emitted as triple-quoted 'multi-line' strings where possible.\r\n\tallowMultiLineStrings = false,\r\n\r\n\t--- Allow real tab characters in string literals (as opposed to the escaped form `\\t`).\r\n\tallowRealTabsInStrings = false,\r\n\r\n\t--- Allow non-ASCII characters in strings (as opposed to their escaped form, e.g. `\\u00DA`).\r\n\tallow_unicode_strings = true,\r\n\r\n\t--- Allow integers with `toml.formatting.int.binary` to be emitted as binary.\r\n\tallowBinaryIntegers = true,\r\n\r\n\t--- Allow integers with `toml.formatting.int.octal` to be emitted as octal.\r\n\tallowOctalIntegers = true,\r\n\r\n\t--- Allow integers with `toml.formatting.int.hexadecimal` to be emitted as hexadecimal.\r\n\tallowHexadecimalIntegers = true,\r\n\r\n\t--- Apply indentation to tables nested within other tables/arrays.\r\n\tindentSubTables = true,\r\n\r\n\t--- Apply indentation to array elements when the array is forced to wrap over multiple lines.\r\n\tindentArrayElements = true,\r\n\r\n\t--- Combination of `indentSubTables` and `indentArrayElements`.\r\n\tindentation = true,\r\n\r\n\t--- Emit floating-point values with relaxed (human-friendly) precision.\r\n\t---\r\n\t--- Warning: Setting this flag may cause serialized documents to no longer round-\r\n\t--- trip correctly since floats might have a less precise value upon being written out\r\n\t--- than they did when being read in. Use this flag at your own risk.\r\n\trelaxedFloatPrecision = false,\r\n\r\n\t--- Avoids the use of whitespace around key-value pairs.\r\n\tterseKeyValuePairs = false\r\n}\n"})}),"\n",(0,l.jsx)(n.h3,{id:"date-and-time",children:"Date and Time"}),"\n",(0,l.jsxs)(n.p,{children:["(Creating Date, Time, and DateTime is shown in ",(0,l.jsx)(n.a,{href:"#encoding",children:"the encoding section"}),")"]}),"\n",(0,l.jsx)(n.pre,{children:(0,l.jsx)(n.code,{className:"language-lua",children:"\trecord Date\r\n\t\tyear: number\r\n\t\tmonth: number\r\n\t\tday: number\r\n\r\n\t\tnew: function(year: number, month: number, day: number): Date\r\n\tend\r\n\r\n\trecord Time\r\n\t\thour: number\r\n\t\tminute: number\r\n\t\tsecond: number\r\n\t\tnanoSecond: number\r\n\r\n\t\tnew: function (\r\n\t\t\thour: number,\r\n\t\t\tminute: number,\r\n\t\t\tsecond: number,\r\n\t\t\tnanoSecond: number\r\n\t\t): Time\r\n\tend\r\n\r\n\trecord TimeOffset\r\n\t\tminutes: number\r\n\r\n\t\tnew: function (hours: number, minutes: number): TimeOffset\r\n\tend\r\n\r\n\trecord DateTime\r\n\t\tdate: Date\r\n\t\ttime: Time\r\n\t\tTimeOffset: nil | TimeOffset\r\n\r\n\t\tnew: function(date: Date, time: Time): DateTime\r\n\t\tnew: function(date: Date, time: Time, timeOffset: TimeOffset): DateTime\r\n\tend\n"})}),"\n",(0,l.jsxs)(n.blockquote,{children:["\n",(0,l.jsxs)(n.p,{children:["The comments for the options are from ",(0,l.jsx)(n.a,{href:"https://marzer.github.io/tomlplusplus/namespacetoml.html#a2102aa80bc57783d96180f36e1f64f6a",children:"the tomlplusplus documentation"})]}),"\n"]})]})}function m(e={}){const{wrapper:n}={...(0,i.R)(),...e.components};return n?(0,l.jsx)(n,{...e,children:(0,l.jsx)(c,{...e})}):c(e)}},28453:(e,n,t)=>{t.d(n,{R:()=>a,x:()=>o});var r=t(96540);const l={},i=r.createContext(l);function a(e){const n=r.useContext(i);return r.useMemo((function(){return"function"==typeof e?e(n):{...n,...e}}),[n,e])}function o(e){let n;return n=e.disableParentContext?"function"==typeof e.components?e.components(l):e.components||l:a(e.components),r.createElement(i.Provider,{value:n},e.children)}}}]);